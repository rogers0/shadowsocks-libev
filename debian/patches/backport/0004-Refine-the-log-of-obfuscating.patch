From: Max Lv <max.c.lv@gmail.com>
Date: Wed, 28 Dec 2016 15:01:04 +0800
Subject: Refine the log of obfuscating

---
 src/local.c  | 4 ++--
 src/redir.c  | 4 ++--
 src/server.c | 4 ++++
 src/tunnel.c | 3 ++-
 4 files changed, 10 insertions(+), 5 deletions(-)

diff --git a/src/local.c b/src/local.c
index 05c8840..0499404 100644
--- a/src/local.c
+++ b/src/local.c
@@ -1256,7 +1256,6 @@ main(int argc, char **argv)
                     obfs_para = obfs_http;
                 else if (strcmp(optarg, obfs_tls->name) == 0)
                     obfs_para = obfs_tls;
-                LOGI("obfuscating enabled");
             } else if (option_index == 5) {
                 obfs_host = optarg;
             } else if (option_index == 6) {
@@ -1470,7 +1469,8 @@ main(int argc, char **argv)
         else
             obfs_para->host = "cloudfront.net";
         obfs_para->port = atoi(remote_port);
-        LOGI("obfuscating arg: %s", obfs_host);
+        LOGI("obfuscating enabled");
+        LOGI("obfuscating hostname: %s", obfs_host);
     }
 
 #ifdef __MINGW32__
diff --git a/src/redir.c b/src/redir.c
index 3ce8993..a2cf458 100644
--- a/src/redir.c
+++ b/src/redir.c
@@ -838,7 +838,6 @@ main(int argc, char **argv)
                     obfs_para = obfs_http;
                 else if (strcmp(optarg, obfs_tls->name) == 0)
                     obfs_para = obfs_tls;
-                LOGI("obfuscating enabled");
             } else if (option_index == 3) {
                 obfs_host = optarg;
             } else if (option_index == 4) {
@@ -1025,7 +1024,8 @@ main(int argc, char **argv)
         else
             obfs_para->host = "cloudfront.net";
         obfs_para->port = atoi(remote_port);
-        LOGI("obfuscating arg: %s", obfs_host);
+        LOGI("obfuscating enabled");
+        LOGI("obfuscating hostname: %s", obfs_host);
     }
 
     // ignore SIGPIPE
diff --git a/src/server.c b/src/server.c
index 892b8dd..b97fd2d 100644
--- a/src/server.c
+++ b/src/server.c
@@ -1842,6 +1842,10 @@ main(int argc, char **argv)
         LOGI("onetime authentication enabled");
     }
 
+    if (obfs_para) {
+        LOGI("obfuscating enabled");
+    }
+
     if (mode != TCP_ONLY) {
         LOGI("UDP relay enabled");
     }
diff --git a/src/tunnel.c b/src/tunnel.c
index bc89d44..ef9fa6e 100644
--- a/src/tunnel.c
+++ b/src/tunnel.c
@@ -1017,7 +1017,8 @@ main(int argc, char **argv)
         else
             obfs_para->host = "cloudfront.net";
         obfs_para->port = atoi(remote_port);
-        LOGI("obfuscating arg: %s", obfs_host);
+        LOGI("obfuscating enabled");
+        LOGI("obfuscating hostname: %s", obfs_host);
     }
 
     // parse tunnel addr
